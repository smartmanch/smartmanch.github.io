<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Comprehension Quiz</title>
    <style>
        /* CSS Styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f6;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        h1, h2 {
            text-align: center;
            color: #2c3e50;
        }

        /* Login Screen */
        .input-group {
            margin-bottom: 15px;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .input-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
            display: block;
            margin: 20px auto;
        }
        button:hover {
            background-color: #2980b9;
        }
        button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }

        /* Passage Box */
        #passage-box {
            background-color: #fdfdfd;
            padding: 20px;
            border: 1px solid #ddd;
            border-left: 5px solid #3498db;
            margin-bottom: 30px;
            max-height: 250px;
            overflow-y: auto;
            line-height: 1.8; /* Thoda space badhaya taaki highlight saaf dikhe */
            font-size: 16px;
            border-radius: 5px;
            position: relative;
        }

        /* Highlight Class for Correct Answer Reference */
        .highlight-active {
            background-color: #fff12e; /* Bright Yellow */
            color: #000;
            font-weight: bold;
            border-radius: 3px;
            padding: 2px 0;
            box-shadow: 0 0 5px rgba(255, 241, 46, 0.8);
            transition: background-color 0.3s ease;
        }

        /* Quiz Section */
        .question-block {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 8px;
        }
        .question-text {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 15px;
        }
        .options {
            display: grid;
            gap: 10px;
        }
        .option-btn {
            background-color: white;
            border: 2px solid #ddd;
            color: #333;
            text-align: left;
            width: 100%;
            margin: 0;
            padding: 10px 15px;
            cursor: pointer;
        }
        .option-btn:hover:not(:disabled) {
            background-color: #f0f0f0;
            border-color: #bbb;
        }
        
        /* Feedback Colors */
        .correct {
            background-color: #d4edda !important;
            border-color: #28a745 !important;
            color: #155724 !important;
        }
        .wrong {
            background-color: #f8d7da !important;
            border-color: #dc3545 !important;
            color: #721c24 !important;
        }

        /* Marksheet */
        .marksheet {
            text-align: center;
            border: 2px solid #2c3e50;
            padding: 20px;
            border-radius: 10px;
        }
        .marksheet table {
            margin: 20px auto;
            width: 80%;
            border-collapse: collapse;
        }
        .marksheet th, .marksheet td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        .score-big {
            font-size: 32px;
            color: #27ae60;
            font-weight: bold;
        }

        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div id="login-screen">
        <h1>Student Login</h1>
        <div class="input-group">
            <label>Student Name:</label>
            <input type="text" id="studentName" placeholder="Enter your full name">
        </div>
        <div class="input-group">
            <label>Roll Number:</label>
            <input type="text" id="rollNumber" placeholder="Enter roll number">
        </div>
        <button onclick="startQuiz()">Start Quiz</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <h2>Reading Comprehension</h2>
        
        <div id="passage-box">
            The bus rolled in through the gates and crunched on the gravel. <span id="ref-q1">It was always the familiar crunch that told him they were in.</span> <span id="ref-q2">They broke up and jumped out with their bags and boxes</span>, and outside, as he stood waiting for the rest to come down, the morning hill air felt good and smelt cool, clean and fresh, and the birds were chirping in the row of trees that ran along the gravel way. When the last boy was out, the bus rolled out of the gates again and they crunched along the gravel toward the stone entry porch.<br><br>
            As they went in, someone observed, ‘Why, today’s Saturday! Always like Saturday because the next day is Sunday. Don’t you? He answered, ‘Yes!’. He thought, Saturday; no day like it. Even class on Saturday was not as bad as on other days and <span id="ref-q3">everyone, including the teacher, seemed happier with prospect of the evening and the <span id="ref-q7">morrow</span></span>.<br><br>
            <span id="ref-q6">For him, it was <span id="ref-q9">mainly</span> the evening</span> and fun at home with his mother - he had lost his father. On Other days there was always home work to do and dinner to prepare. <span id="ref-q4">But on Saturday they both were free</span>; he did only a little of the homework; and his mother finished cooking early. Saturday evening meant a lot to him. And then there was, of course, the matinee on Sunday, about the only excitement of a rather quiet day.<br><br>
            They passed the dining room. The boarders were at breakfast and they could hear the boys talking and the clatter of plates and knives, forks, spoons, cups and saucers. There was such a noise. <span id="ref-q8">‘They’re having plantains this morning’</span>. Peter said, creeping up to one of the entrances. <span id="ref-q5">‘Hey, Whisky! Let’s have a plantain’</span>, he called out to the boy sitting at the table nearest to him, ‘Whisky’ scowled, but on second thoughts threw him a skin. It looked so funny that all laughed.
        </div>

        <div id="question-container">
            </div>

        <button id="next-btn" class="hidden" onclick="loadNextQuestion()">Next Question</button>
        <button id="finish-btn" class="hidden" onclick="showResults()">View Marksheet</button>
    </div>

    <div id="result-screen" class="hidden">
        <h1>Quiz Marksheet</h1>
        <div class="marksheet">
            <p><strong>Name:</strong> <span id="res-name"></span></p>
            <p><strong>Roll No:</strong> <span id="res-roll"></span></p>
            <hr>
            <p>Total Questions: 9</p>
            <p>Your Score:</p>
            <div class="score-big"><span id="res-score">0</span> / 18</div>
            <br>
            <button onclick="location.reload()">Restart Quiz</button>
        </div>
    </div>
</div>

<script>
    // --- Data Configuration ---
    // refId matches the ID in the HTML passage above
    const quizData = [
        {
            q: "i) Which was the familiar crunch?",
            options: ["The sound of birds chirping", "The bus rolling on the gravel", "The clatter of plates", "The noise of the school bell"],
            correct: 1, 
            refId: "ref-q1" 
        },
        {
            q: "ii) Who jumped out from the bus?",
            options: ["The teachers", "The parents", "The boys (They)", "Only the narrator"],
            correct: 2,
            refId: "ref-q2"
        },
        {
            q: "iii) Why did everyone seem happier on Saturday?",
            options: ["Because of the plantains", "Because exams were over", "Because of the prospect of the evening and the morrow", "Because the teacher was absent"],
            correct: 2,
            refId: "ref-q3"
        },
        {
            q: "iv) Who used to be free on Saturday?",
            options: ["The boarders", "The narrator and his mother", "Only the teacher", "Peter and Whisky"],
            correct: 1,
            refId: "ref-q4"
        },
        {
            q: "v) What did Peter say?",
            options: ["Why, today’s Saturday!", "Hey, Whisky! Let’s have a plantain", "The birds are chirping", "Let's do homework"],
            correct: 1,
            refId: "ref-q5"
        },
        {
            q: "vi) About whom did the narrator state in this passage?",
            options: ["About a bus driver", "About a school boy (himself)", "About a gardener", "About a cook"],
            correct: 1,
            refId: "ref-q6"
        },
        {
            q: "vii) Find the word from the passage opposite in meaning to 'Yesterday'.",
            options: ["Today", "Morning", "Morrow", "Evening"],
            correct: 2,
            refId: "ref-q7" // Maps to 'morrow'
        },
        {
            q: "viii) Find the word from the passage similar to 'Banana'.",
            options: ["Plantain", "Fruit", "Skin", "Gravel"],
            correct: 0,
            refId: "ref-q8" // Maps to 'plantains' sentence
        },
        {
            q: "ix) Find the word from the passage similar to 'Primarily'.",
            options: ["Usually", "Mainly", "Always", "Rather"],
            correct: 1,
            refId: "ref-q9" // Maps to 'mainly'
        }
    ];

    // --- State Variables ---
    let currentQuestionIndex = 0;
    let score = 0;
    let studentName = "";
    let rollNumber = "";
    let attemptsOnCurrent = 0; 

    // --- Functions ---

    function startQuiz() {
        const nameInput = document.getElementById('studentName').value;
        const rollInput = document.getElementById('rollNumber').value;

        if (nameInput.trim() === "" || rollInput.trim() === "") {
            alert("Please enter both Name and Roll Number.");
            return;
        }

        studentName = nameInput;
        rollNumber = rollInput;

        document.getElementById('login-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        
        loadQuestion();
    }

    function loadQuestion() {
        // Clear previous highlights
        clearHighlights();

        const qContainer = document.getElementById('question-container');
        const nextBtn = document.getElementById('next-btn');
        const finishBtn = document.getElementById('finish-btn');
        
        qContainer.innerHTML = "";
        nextBtn.classList.add('hidden');
        finishBtn.classList.add('hidden');
        attemptsOnCurrent = 0;

        const data = quizData[currentQuestionIndex];

        // Create Question UI
        const qTitle = document.createElement('div');
        qTitle.className = 'question-text';
        qTitle.innerText = `Q${currentQuestionIndex + 1}: ${data.q}`;
        qContainer.appendChild(qTitle);

        const optContainer = document.createElement('div');
        optContainer.className = 'options';

        data.options.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(btn, index, data.correct, data.refId);
            optContainer.appendChild(btn);
        });

        qContainer.appendChild(optContainer);
    }

    function checkAnswer(btnElement, selectedIndex, correctIndex, refId) {
        const allBtns = document.querySelectorAll('.option-btn');

        if (selectedIndex === correctIndex) {
            // Correct Answer
            btnElement.classList.add('correct');
            
            // Highlight Passage Text
            highlightPassage(refId);

            // Add points ONLY on first attempt
            if (attemptsOnCurrent === 0) {
                score += 2;
            }

            // Disable all buttons
            allBtns.forEach(btn => btn.disabled = true);

            // Show Next/Finish Button
            if (currentQuestionIndex < quizData.length - 1) {
                document.getElementById('next-btn').classList.remove('hidden');
            } else {
                document.getElementById('finish-btn').classList.remove('hidden');
            }

        } else {
            // Wrong Answer
            btnElement.classList.add('wrong');
            btnElement.disabled = true; 
            attemptsOnCurrent++; 
        }
    }

    function highlightPassage(id) {
        // Find the specific span in the passage
        const el = document.getElementById(id);
        if (el) {
            el.classList.add('highlight-active');
            
            // Auto-scroll the passage box so the highlighted text is visible
            el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }

    function clearHighlights() {
        // Remove highlight class from all spans
        const highlighted = document.querySelectorAll('.highlight-active');
        highlighted.forEach(el => el.classList.remove('highlight-active'));
        
        // Scroll back to top of passage for new question
        document.getElementById('passage-box').scrollTop = 0;
    }

    function loadNextQuestion() {
        currentQuestionIndex++;
        loadQuestion();
    }

    function showResults() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');

        document.getElementById('res-name').innerText = studentName;
        document.getElementById('res-roll').innerText = rollNumber;
        document.getElementById('res-score').innerText = score;
    }
</script>

</body>
</html>